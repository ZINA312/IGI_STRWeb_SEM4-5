{% extends 'main/layout.html' %}

{% block title %}Отзывы{% endblock %}

{% block content %}
    <h1 style="font-family: Arial, sans-serif; color: #333;">Отзывы</h1>

    {% if user.is_authenticated %}
        <h2 style="font-family: Arial, sans-serif; color: #333;">Оставить отзыв</h2>
        <form method="POST" action="{% url 'reviews' %}" style="background-color: #fff; border-radius: 8px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
            {% csrf_token %}
            <label for="rating" style="display: block; margin-top: 10px;">Оценка (от 1 до 5):</label>
            <input type="number" id="rating" name="rating" min="1" max="5" required style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px;">
            <br>
            <label for="text" style="display: block; margin-top: 10px;">Текст отзыва:</label>
            <textarea id="text" name="text" required style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px;"></textarea>
            <br>
            <button type="submit" style="margin-top: 10px; padding: 10px 15px; background-color: #007bff; color: #fff; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s;">Отправить</button>
        </form>
    {% else %}
        <p style="font-family: Arial, sans-serif;">Для оставления отзыва необходимо <a href="{% url 'login' %}" style="color: #007bff; text-decoration: none;">войти</a>.</p>
    {% endif %}

    <h2 style="font-family: Arial, sans-serif; color: #333;">Все отзывы</h2>
    {% if reviews %}
        <ul style="list-style-type: none; padding: 0;">
            {% for review in reviews %}
                <li style="background-color: #fff; border-radius: 8px; padding: 15px; margin: 10px 0; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);">
                    <strong style="color: #007bff;">{{ review.user.username }}</strong> - {{ review.rating }} 
                    <em style="color: #999; font-size: 0.9em;">{{ review.created_at|date:"d.m.Y H:i" }}</em>
                    <p>{{ review.text }}</p>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p style="font-family: Arial, sans-serif;">Нет доступных отзывов.</p>
    {% endif %}
{% endblock %}