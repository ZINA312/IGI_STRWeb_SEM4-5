{% extends 'main/layout.html' %}

{% block title %}Отзывы{% endblock %}

{% block content %}
  {% if user.is_authenticated %}
    <h2>Оставить отзыв</h2>
    <form method="POST" action="{% url 'reviews' %}">
      {% csrf_token %}
      <label for="rating">Оценка (от 1 до 5):</label>
      <input type="number" id="rating" name="rating" min="1" max="5" required>
      <br>
      <label for="text">Текст отзыва:</label>
      <textarea id="text" name="text" required></textarea>
      <br>
      <button type="submit">Отправить</button>
    </form>
  {% else %}
    <p>Для оставления отзыва необходимо <a href="{% url 'login' %}">войти</a>.</p>
  {% endif %}

  <h2>Все отзывы</h2>
  {% if reviews %}
    <ul>
      {% for review in reviews %}
        <li>{{ review.user.username }} - {{ review.rating }} - {{ review.text }}</li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Нет доступных отзывов.</p>
  {% endif %}
{% endblock %}